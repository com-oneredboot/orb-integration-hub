# Migration Guide: Moving Generated Models to orb-models Package

## Overview

This document outlines the migration of generated models, enums, and repository files from `backend/src/core/models/` to the `orb-models` package.

## Current State

All models, enums, and the DynamoDB repository file are currently generated by `schemas/generate.py` and output to:
- `backend/src/core/models/*Model.py` - Data models
- `backend/src/core/models/*Enum.py` - Enum definitions  
- `backend/src/core/models/dynamodb.repository.py` - DynamoDB table mappings

## Target State

These files should be generated into the orb-models package:
- `backend/packages/orb-models/orb_models/models/*Model.py` - Data models
- `backend/packages/orb-models/orb_models/enums/*Enum.py` - Enum definitions
- `backend/packages/orb-models/orb_models/repository/dynamodb.repository.py` - DynamoDB table mappings

## Migration Steps

### 1. Update generate.py (Task 51.10)

Update the output paths in generate.py:

```python
# Old paths
output_path = os.path.join(SCRIPT_DIR, '..', 'backend', 'src', 'core', 'models', file_name)

# New paths for models
output_path = os.path.join(SCRIPT_DIR, '..', 'backend', 'packages', 'orb-models', 'orb_models', 'models', file_name)

# New paths for enums  
output_path = os.path.join(SCRIPT_DIR, '..', 'backend', 'packages', 'orb-models', 'orb_models', 'enums', file_name)

# New path for repository
output_path = os.path.join(SCRIPT_DIR, '..', 'backend', 'packages', 'orb-models', 'orb_models', 'repository', 'dynamodb.repository.py')
```

### 2. Update Import Generation

The generate.py script also needs to update how it generates imports in the model files to use the new package structure.

### 3. Update __init__.py Files

After generation, update the __init__.py files in each subdirectory to properly export all generated models and enums.

### 4. Update All Imports

All code that imports from `backend.src.core.models` needs to be updated to import from `orb_models`.

### 5. Install Package

Ensure orb-models is installed in development environments:
```bash
pip install -e backend/packages/orb-models
```

## Benefits

1. **Proper Package Structure**: Models become a reusable package
2. **Clear Separation**: Generated code is clearly separated from hand-written code
3. **Better Testing**: Models can be tested independently
4. **Type Safety**: Package includes py.typed for better type checking support

## Notes

- All model and enum files are auto-generated and should NOT be edited manually
- The package structure is ready, but files will only appear after generate.py is updated
- The package is configured for internal use only (not published to PyPI)