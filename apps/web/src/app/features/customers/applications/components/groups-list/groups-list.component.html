<!-- Groups List Component Template -->
<!-- Uses global orb-* CSS classes from components.scss for consistency -->
<!-- @see organizations-list.component.html for canonical reference -->
<div class="orb-card">
  <!-- Header -->
  <div class="orb-card__header">
    <h2 class="orb-card__title">
      <fa-icon icon="users" class="orb-card__icon"></fa-icon>
      Groups
    </h2>
    <div class="orb-card__header-actions">
      <button
        class="orb-card-btn"
        (click)="onCreateGroup()"
        [disabled]="isCreatingNew$ | async"
        aria-label="Create new group">
        <fa-icon icon="plus" class="orb-card-btn__icon"></fa-icon>
        Create Group
      </button>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error$ | async as error" class="groups-list__error" role="alert">
    <fa-icon icon="exclamation-triangle"></fa-icon>
    {{ error }}
  </div>

  <!-- Data Grid -->
  <div class="orb-card__content">
    <app-data-grid
      [columns]="columns"
      [data]="(filteredGroupRows$ | async) || []"
      [pageState]="pageState"
      [sortState]="sortState"
      [filterState]="filterState"
      [loading]="(isLoading$ | async) || false"
      [showFilters]="true"
      [showPagination]="true"
      [showReset]="true"
      [selectable]="false"
      trackByField="group"
      emptyMessage="No groups found. Create your first group to organize users."
      (pageChange)="onPageChange($event)"
      (sortChange)="onSortChange($event)"
      (filterChange)="onFilterChange($event)"
      (resetGrid)="onResetGrid()"
      (rowClick)="onRowClick($event)">
    </app-data-grid>
  </div>
</div>

<!-- Custom Cell Templates -->

<!-- Group Info Cell -->
<ng-template #groupInfoCell let-row>
  <div class="orb-info">
    <div class="orb-info__name">{{ row.group.name }}</div>
    <div class="orb-info__id" *ngIf="row.group.description">
      {{ row.group.description }}
    </div>
    <div class="orb-info__id">{{ row.group.applicationGroupId }}</div>
  </div>
</ng-template>

<!-- Status Cell -->
<ng-template #statusCell let-row>
  <app-status-badge
    [status]="row.group.status"
    type="group"
    [showIcon]="true"
    [showLabel]="true"
    size="small"
    variant="chip">
  </app-status-badge>
</ng-template>

<!-- Member Count Cell -->
<ng-template #memberCountCell let-row>
  <div class="orb-count">
    <fa-icon icon="user" class="orb-count__icon"></fa-icon>
    {{ row.memberCount }}
  </div>
</ng-template>

<!-- Last Activity Cell -->
<ng-template #lastActivityCell let-row>
  <span class="orb-info__id">{{ row.lastActivity }}</span>
</ng-template>
