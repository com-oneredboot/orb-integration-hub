# Requirements Document

## Introduction

This feature migrates all manually created TypeScript enums to use orb-schema-generator and updates coding standards to prevent future manual enum creation. The project's core principle is "Nothing is ever frontend only. EVER." - all enums must be defined in YAML schema registries and generated via orb-schema-generator.

Schema registries have already been created for the affected enums, and backward-compatible aliases exist. This migration completes the transition by updating all code to use the generated enums with PascalCase values and removing the deprecated aliases.

## Glossary

- **Schema_Registry**: A YAML file in `schemas/registries/` that defines an enum for code generation
- **Generated_Enum**: A TypeScript enum file auto-generated by orb-schema-generator from a schema registry
- **Backward_Compatible_Alias**: A temporary object mapping SCREAMING_CASE names to PascalCase enum values
- **orb-schema-generator**: The code generation tool that creates TypeScript/Python code from YAML schemas
- **PascalCase_Value**: Enum member naming convention used by generated enums (e.g., `AuthStep.EmailEntry`)
- **SCREAMING_CASE_Value**: Legacy enum member naming convention (e.g., `AuthSteps.EMAIL_ENTRY`)
- **Steering_File**: A markdown file in `.kiro/steering/` that provides coding guidelines

## Requirements

### Requirement 1: Migrate AuthStep Enum Usage

**User Story:** As a developer, I want all code to use the generated AuthStep enum with PascalCase values, so that the codebase is consistent with orb-schema-generator conventions.

#### Acceptance Criteria

1. WHEN code references authentication steps, THE Code SHALL import `AuthStep` from `core/enums/AuthStepEnum.ts`
2. WHEN code uses authentication step values, THE Code SHALL use PascalCase values (e.g., `AuthStep.Email`, `AuthStep.PasswordSetup`)
3. WHEN the migration is complete, THE System SHALL have zero references to the `AuthSteps` alias object
4. WHEN the migration is complete, THE System SHALL have zero SCREAMING_CASE enum value references for AuthStep

### Requirement 2: Migrate CognitoUserStatus Enum Usage

**User Story:** As a developer, I want all code to use the generated CognitoUserStatus enum with PascalCase values, so that the codebase is consistent with orb-schema-generator conventions.

#### Acceptance Criteria

1. WHEN code references Cognito user status, THE Code SHALL import `CognitoUserStatus` from `core/enums/CognitoUserStatusEnum.ts`
2. WHEN code uses Cognito user status values, THE Code SHALL use PascalCase values (e.g., `CognitoUserStatus.Confirmed`, `CognitoUserStatus.Unconfirmed`)
3. WHEN the migration is complete, THE System SHALL have zero references to the backward-compatible `CognitoUserStatus` alias object in RecoveryModel.ts

### Requirement 3: Migrate RecoveryAction Enum Usage

**User Story:** As a developer, I want all code to use the generated RecoveryAction enum with PascalCase values, so that the codebase is consistent with orb-schema-generator conventions.

#### Acceptance Criteria

1. WHEN code references recovery actions, THE Code SHALL import `RecoveryAction` from `core/enums/RecoveryActionEnum.ts`
2. WHEN code uses recovery action values, THE Code SHALL use PascalCase values (e.g., `RecoveryAction.NewSignup`, `RecoveryAction.Login`)
3. WHEN the migration is complete, THE System SHALL have zero references to the backward-compatible `RecoveryAction` alias object in RecoveryModel.ts

### Requirement 4: Migrate ProfileSetupStep Enum Usage

**User Story:** As a developer, I want all code to use the generated ProfileSetupStep enum with PascalCase values, so that the codebase is consistent with orb-schema-generator conventions.

#### Acceptance Criteria

1. WHEN code references profile setup steps, THE Code SHALL import `ProfileSetupStep` from `core/enums/ProfileSetupStepEnum.ts`
2. WHEN code uses profile setup step values, THE Code SHALL use PascalCase values (e.g., `ProfileSetupStep.Name`, `ProfileSetupStep.PhoneVerify`)
3. WHEN the migration is complete, THE System SHALL have zero references to the backward-compatible `ProfileSetupStep` alias object in profile.component.ts

### Requirement 5: Remove Backward-Compatible Aliases

**User Story:** As a developer, I want all backward-compatible alias objects removed, so that the codebase has a single source of truth for enum values.

#### Acceptance Criteria

1. WHEN the migration is complete, THE File `user.state.ts` SHALL NOT contain the `AuthSteps` alias object
2. WHEN the migration is complete, THE File `RecoveryModel.ts` SHALL NOT contain the `CognitoUserStatus` or `RecoveryAction` alias objects
3. WHEN the migration is complete, THE File `profile.component.ts` SHALL NOT contain the `ProfileSetupStep` alias object
4. WHEN the migration is complete, THE System SHALL have no `@deprecated` comments referencing these alias objects

### Requirement 6: Update Coding Standards Documentation

**User Story:** As a developer, I want clear documentation on enum standards, so that future development follows the correct patterns.

#### Acceptance Criteria

1. THE Steering_File `frontend-components.md` SHALL include an "Enum Standards" section
2. THE Enum_Standards section SHALL state that all enums MUST be defined in schema registries
3. THE Enum_Standards section SHALL state that TypeScript enums MUST NOT be created manually
4. THE Enum_Standards section SHALL document the PascalCase naming convention for enum values
5. THE Enum_Standards section SHALL include examples of correct vs incorrect patterns
6. THE Enum_Standards section SHALL reference the generated enum location (`core/enums/`)

### Requirement 7: Verify Code Quality

**User Story:** As a developer, I want all tests to pass and no TypeScript errors, so that the migration is complete and correct.

#### Acceptance Criteria

1. WHEN running `npm test` in apps/web, THE Test_Suite SHALL pass with zero failures
2. WHEN running `npm run lint` in apps/web, THE Linter SHALL report zero errors
3. WHEN running TypeScript compilation, THE Compiler SHALL report zero enum-related errors
4. FOR ALL test files using enum values, THE Tests SHALL use PascalCase enum values
