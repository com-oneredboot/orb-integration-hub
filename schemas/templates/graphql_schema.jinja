"""
Base GraphQL schema.
Generated at [[ timestamp ]].

This schema follows these conventions:
- Type names: PascalCase (e.g., ApplicationRole)
- Field names: camelCase (e.g., applicationId)
- Input types: PascalCase with Input suffix (e.g., ApplicationRoleInput)
- Response types: PascalCase with Response suffix (e.g., ApplicationRoleResponse)
- List response types: PascalCase with ListResponse suffix (e.g., ApplicationRoleListResponse)
- Query operations: camelCase with Query suffix (e.g., applicationRoleQuery)
- Mutation operations: camelCase with action suffix (e.g., applicationRoleCreate)

All operations are secured with AWS Cognito user pool authentication for the admin group.
"""

# Enums
enum Status {
  ACTIVE
  INACTIVE
  DELETED
}

enum UserGroups {
  ADMIN
  USER
}

enum ApplicationEnvironments {
  DEV
  STAGING
  PROD
}

# Base types
type Query {
  ping: String
}

type Mutation {
  ping: String
}

# Model types
{% for table_name, schema in schemas.items() %}
type [[ table_name | to_pascal_case ]] {
  {% for attr in schema.attributes %}
  [[ attr.name | to_camel_case ]]: {% if attr.type == 'N' %}Int{% else %}String{% endif %}!
  {% endfor %}
}

input [[ table_name | to_pascal_case ]]CreateInput {
  {% for attr in schema.attributes %}
  [[ attr.name | to_camel_case ]]: {% if attr.type == 'N' %}Int{% else %}String{% endif %}!
  {% endfor %}
}

input [[ table_name | to_pascal_case ]]UpdateInput {
  {% for attr in schema.attributes %}
  [[ attr.name | to_camel_case ]]: {% if attr.type == 'N' %}Int{% else %}String{% endif %}
  {% endfor %}
}

input [[ table_name | to_pascal_case ]]QueryInput {
  [[ schema.partition_key | to_camel_case ]]: String!
  {% if schema.sort_key %}
  [[ schema.sort_key | to_camel_case ]]: String
  {% endif %}
}

type [[ table_name | to_pascal_case ]]Response {
  statusCode: Int!
  message: String!
  data: [[ table_name | to_pascal_case ]]
}

type [[ table_name | to_pascal_case ]]ListResponse {
  statusCode: Int!
  message: String!
  data: [[[ table_name | to_pascal_case ]]]
}

{% endfor %}

# Query operations
extend type Query {
  {% for table_name, schema in schemas.items() %}
  {% if table_name == 'applications' %}
  applicationQueryById(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  {% elif table_name == 'applicationroles' %}
  roleQueryById(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  roleQueryByApplicationId(application_id: String!): [[ table_name | to_pascal_case ]]ListResponse
    @aws_auth(cognito_groups: ["admin"])
  {% elif table_name == 'applicationusers' %}
  applicationUserQueryById(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  {% elif table_name == 'roles' %}
  roleQueryById(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  roleQueryByApplicationId(application_id: String!): [[ table_name | to_pascal_case ]]ListResponse
    @aws_auth(cognito_groups: ["admin"])
  {% elif table_name == 'users' %}
  userQueryById(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  {% endif %}
  {% endfor %}
}

# Mutation operations
extend type Mutation {
  {% for table_name, schema in schemas.items() %}
  {% if table_name == 'applications' %}
  applicationCreate(input: [[ table_name | to_pascal_case ]]CreateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  applicationUpdate(id: ID!, input: [[ table_name | to_pascal_case ]]UpdateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  applicationDelete(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  {% elif table_name == 'applicationroles' %}
  roleCreate(input: [[ table_name | to_pascal_case ]]CreateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  roleUpdate(id: ID!, input: [[ table_name | to_pascal_case ]]UpdateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  roleDelete(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  {% elif table_name == 'applicationusers' %}
  applicationUserCreate(input: [[ table_name | to_pascal_case ]]CreateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  applicationUserUpdate(id: ID!, input: [[ table_name | to_pascal_case ]]UpdateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  applicationUserDelete(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  {% elif table_name == 'roles' %}
  roleCreate(input: [[ table_name | to_pascal_case ]]CreateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  roleUpdate(id: ID!, input: [[ table_name | to_pascal_case ]]UpdateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  roleDelete(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  {% elif table_name == 'users' %}
  userCreate(input: [[ table_name | to_pascal_case ]]CreateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  userUpdate(id: ID!, input: [[ table_name | to_pascal_case ]]UpdateInput!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  userDelete(id: ID!): [[ table_name | to_pascal_case ]]Response
    @aws_auth(cognito_groups: ["admin"])
  {% endif %}
  {% endfor %}
}