{%- set seen_ops = [] %}
{% for schema_name, schema in table_schemas.items() %}
{%- for index in schema.indexes -%}
  {%- if index.sort %}
    {%- set op_name = schema.name ~ 'QueryBy' ~ index.partition|to_pascal_case ~ 'And' ~ index.sort|to_pascal_case %}
  {%- else %}
    {%- set op_name = schema.name ~ 'QueryBy' ~ index.partition|to_pascal_case %}
  {%- endif -%}
  {% if op_name not in seen_ops -%}
    {{ op_name }}(input: {{ op_name }}Input!): {{ schema.name }}ListResponse{{ (" " + (schema.query_auth_directives[op_name]|join(' '))) if schema.query_auth_directives and op_name in schema.query_auth_directives and schema.query_auth_directives[op_name] else ' @aws_auth(cognito_groups: ["admin"])' }}
    {%- set _ = seen_ops.append(op_name) %}
  {% endif -%}
{%- endfor -%}
{%- endfor -%}