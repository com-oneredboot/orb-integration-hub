# file: schemas/tables/ApplicationRoles.yml
# author: Corey Dale Peters
# date: 2025-02-17
# description: ApplicationRoles table schema for role definitions per application.
# Customers define role labels (e.g., "Admin", "Editor") that are returned in JWTs.

type: dynamodb
pitr_enabled: false
version: '1.1'
name: ApplicationRoles
targets:
  - python-main
  - ts-main
  - graphql-main
model:
  authConfig:
    cognitoAuthentication:
      groups:
        OWNER:
          - '*'
        EMPLOYEE:
          - '*'
        CUSTOMER:
          - '*'
  keys:
    primary:
      partition: applicationRoleId
      description: Primary key for application role definitions
    secondary:
      - name: ApplicationRoleIndex
        type: GSI
        partition: applicationId
        sort: roleId
        projection_type: ALL
        description: Index for querying roles by application
      - name: RoleTypeIndex
        type: GSI
        partition: roleId
        sort: roleType
        projection_type: ALL
        description: Index for filtering roles by type
  attributes:
    applicationRoleId:
      type: string
      required: true
      description: Unique identifier for the application role definition (primary key)
    applicationId:
      type: string
      required: true
      description: ID of the application this role belongs to (foreign key to Applications)
    roleId:
      type: string
      required: true
      description: Unique role identifier within the application
    roleName:
      type: string
      required: true
      description: Display name of the role (e.g., "Admin", "Editor", "Viewer")
    roleType:
      type: string
      required: true
      enum_type: ApplicationRoleType
      enum_values:
        - ADMIN
        - USER
        - GUEST
        - CUSTOM
      description: Type of the role
    description:
      type: string
      required: false
      description: Optional description of what this role is for
    status:
      type: string
      required: true
      enum_type: ApplicationRoleStatus
      enum_values:
        - ACTIVE
        - INACTIVE
        - DELETED
      description: Current status of the role definition
    createdAt:
      type: timestamp
      required: true
      description: When the role was created
    updatedAt:
      type: timestamp
      required: true
      description: When the role was last updated
