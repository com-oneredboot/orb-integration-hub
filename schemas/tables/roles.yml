# file: schemas/tables/roles.yml
# author: Corey Dale Peters
# date: 2025-02-17
# description: yaml file containing the roles table schema

version: '1.0'
table: roles
model:
  keys:
    primary:
      partition: role_id
    secondary:
      - name: user-role-index
        type: GSI
        partition: user_id
        sort: role_id
        projection_type: INCLUDE
        projected_attributes:
          - role_name
          - role_type
          - permissions
        description: Index for querying roles by user with essential role attributes projected
      
      - name: application-role-index
        type: GSI
        partition: application_id
        sort: role_id
        projection_type: KEYS_ONLY
        description: Index for querying roles by application with minimal projection
      
      - name: role-type-index
        type: LSI
        partition: role_id
        sort: role_type
        projection_type: ALL
        description: Local secondary index for filtering roles by type
  attributes:
    role_id:
      type: string
      required: true
    user_id:
      type: string
      required: true
    application_id:
      type: string
      required: true
    role_name:
      type: string
      required: true
    role_type:
      type: string
      enum: [Employee, Client, Customer, Owner]
      required: true
    permissions:
      type: array
      items:
        type: string
      required: true
    created_at:
      type: number
      required: true
    updated_at:
      type: number
      required: true
    active:
      type: boolean
      required: true
