# file: schemas/tables/ApplicationGroupUsers.yml
# author: orb-integration-hub
# date: 2026-01-27
# description: ApplicationGroupUsers table schema for managing user membership in application groups

type: dynamodb
pitr_enabled: false
version: '1.0'
name: ApplicationGroupUsers
targets:
  - api
model:
  authConfig:
    cognitoAuthentication:
      groups:
        OWNER:
          - '*'
        EMPLOYEE:
          - '*'
        CUSTOMER:
          - '*'
  keys:
    primary:
      partition: applicationGroupUserId
      description: Primary key for group membership records (unique for each membership)
    secondary:
      - name: GroupUsersIndex
        type: GSI
        partition: applicationGroupId
        sort: userId
        projection_type: ALL
        description: Index for querying users by group
      - name: UserGroupsIndex
        type: GSI
        partition: userId
        sort: applicationGroupId
        projection_type: ALL
        description: Index for querying groups by user
      - name: GroupStatusIndex
        type: GSI
        partition: applicationGroupId
        sort: status
        projection_type: ALL
        description: Index for querying memberships by group and status
  attributes:
    applicationGroupUserId:
      type: string
      required: true
      description: Unique identifier for the group membership (primary key)
    applicationGroupId:
      type: string
      required: true
      description: ID of the group (foreign key to ApplicationGroups)
    userId:
      type: string
      required: true
      description: ID of the user (foreign key to Users)
    applicationId:
      type: string
      required: true
      description: ID of the application (denormalized for queries)
    status:
      type: string
      required: true
      enum_type: ApplicationGroupUserStatus
      enum_values:
        - ACTIVE
        - REMOVED
        - INVITED
      description: Current status of the membership
    createdAt:
      type: timestamp
      required: true
      description: When the user was added to the group
    updatedAt:
      type: timestamp
      required: true
      description: When the membership was last updated
