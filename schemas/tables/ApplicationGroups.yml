# file: schemas/tables/ApplicationGroups.yml
# author: orb-integration-hub
# date: 2026-01-27
# description: ApplicationGroups table schema for managing user groups within applications

type: dynamodb
pitr_enabled: false
version: '1.0'
name: ApplicationGroups
targets:
  - api
model:
  authConfig:
    cognitoAuthentication:
      groups:
        OWNER:
          - '*'
        EMPLOYEE:
          - '*'
        CUSTOMER:
          - '*'
  keys:
    primary:
      partition: applicationGroupId
      description: Primary key for application groups (unique for each group)
    secondary:
      - name: ApplicationGroupsIndex
        type: GSI
        partition: applicationId
        sort: name
        projection_type: ALL
        description: Index for querying groups by application with name ordering
      - name: ApplicationStatusIndex
        type: GSI
        partition: applicationId
        sort: status
        projection_type: ALL
        description: Index for querying groups by application and status
  attributes:
    applicationGroupId:
      type: string
      required: true
      description: Unique identifier for the application group (primary key)
    applicationId:
      type: string
      required: true
      description: ID of the application this group belongs to (foreign key to Applications)
    name:
      type: string
      required: true
      description: Name of the group (unique within application)
    description:
      type: string
      required: false
      description: Optional description of the group
    status:
      type: string
      required: true
      enum_type: ApplicationGroupStatus
      enum_values:
        - ACTIVE
        - DELETED
      description: Current status of the group
    memberCount:
      type: integer
      required: false
      default: 0
      description: Denormalized count of active members in this group
    createdAt:
      type: timestamp
      required: true
      description: When the group was created
    updatedAt:
      type: timestamp
      required: true
      description: When the group was last updated
