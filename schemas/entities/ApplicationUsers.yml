# file: schemas/entities/ApplicationUser.yml
# author: Corey Dale Peters
# date: 2025-02-17
# description: yaml file containing the ApplicationUser table schema

type: table
version: '1.0'
name: ApplicationUsers
model:
  authConfig:
    defaultAuth: user_pools
  keys:
    primary:
      partition: applicationId
      sort: userId
      projectionType: ALL
      description: Primary key for application users
    secondary:
      - name: user-applications-index
        type: GSI
        partition: userId
        sort: applicationId
        projectionType: ALL
        description: Index for querying applications by user
      - name: application-role-index
        type: GSI
        partition: applicationId
        sort: roleId
        projectionType: ALL
        description: Index for querying users by role within an application
      - name: user-status-index
        type: GSI
        partition: applicationId
        sort: status
        projectionType: ALL
        description: Index for querying users by status within an application
  attributes:
    applicationId:
      type: string
      required: true
      description: ID of the application
    userId:
      type: string
      required: true
      description: ID of the user
    roleId:
      type: string
      required: false
      description: Unique identifier for the role assigned to the user
    status:
      type: string
      required: true
      enum_type: ApplicationUserStatus
      enum_values:
        - ACTIVE
        - INACTIVE
        - PENDING
        - REJECTED
        - DELETED
      description: Status of the user in the application
    createdAt:
      type: timestamp
      required: true
      description: When the user was added to the application
    updatedAt:
      type: timestamp
      required: true
      description: When the user's application status was last updated 