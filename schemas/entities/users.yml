# file: schemas/tables/users.yml
# author: AI Assistant
# date: 2024-03-21
# description: yaml file containing the users table schema

version: '1.0'
table: Users
model:
  auth_config:
    api_key_operations:
      - User
      - UserResponse
      - UserQueryInput
      - UserCreateInput
      - UserUpdateInput
      - UserQueryById
      - UserCreate
      - UserUpdate
    # Default auth is user pools only
    default_auth: user_pools
  keys:
    primary:
      partition: user_id  # Partition key for the table
      projection_type: ALL     # Project all attributes in indexes
      description: Primary key for users
    secondary:
      - name: user-status-index
        type: GSI
        partition: user_id
        sort: status
        projection_type: ALL
        description: Index for querying users by status
      - name: user-email-index
        type: GSI
        partition: email
        sort: user_id
        projection_type: ALL
        description: Index for querying users by email
  attributes:
    user_id:
      type: string
      required: true
      description: Unique identifier for the user
    cognito_id:
      type: string
      required: true
      description: Unique identifier from Cognito
    email:
      type: string
      required: true
      description: User's email address
    phone_number:
      type: string
      required: true
      description: User's phone number
    phone_verified:
      type: boolean
      required: true
      description: Whether the phone number is verified
    first_name:
      type: string
      required: true
      description: User's first name
    last_name:
      type: string
      required: true
      description: User's last name
    groups:
      type: array
      items:
        type: string
      required: true
      description: User's groups
    status:
      type: string
      required: true
      enum_type: UserStatus
      enum_values:
        - UNKNOWN
        - ACTIVE
        - INACTIVE
        - PENDING
        - REJECTED
        - DELETED
      description: User's status
    created_at:
      type: timestamp
      required: true
      description: When the user was created
    updated_at:
      type: timestamp
      required: true
      description: When the user was last updated
