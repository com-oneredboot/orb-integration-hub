# file: schemas/entities/User.yml
# author: Corey Dale Peters
# date: 2025-02-17
# description: yaml file containing the User table schema

type: table
version: '1.0'
table: Users
model:
  authConfig:
    apiKeyOperations:
      - User
      - UserResponse
      - UserQueryInput
      - UserCreateInput
      - UserUpdateInput
      - UserQueryById
      - UserCreate
      - UserUpdate
    # Default auth is user pools only
    defaultAuth: user_pools
  keys:
    primary:
      partition: userId
      sort: cognitoId
      projectionType: ALL
      description: Primary key for users
    secondary:
      - name: CognitoUserIndex
        type: GSI
        partition: cognitoId
        sort: userId
        projectionType: ALL
        description: Index for querying users by Cognito ID
      - name: PhoneUserIndex
        type: GSI
        partition: phoneNumber
        sort: userId
        projectionType: ALL
        description: Index for querying users by phone number
      - name: EmailUserIndex
        type: GSI
        partition: email
        sort: userId
        projectionType: ALL
        description: Index for querying users by email
  attributes:
    userId:
      type: string
      required: true
      description: Unique identifier for the user
    cognitoId:
      type: string
      required: true
      description: Cognito user ID
    email:
      type: string
      required: true
      description: User's email address
    emailVerified:
      type: boolean
      required: true
      description: Whether the email has been verified
    phoneNumber:
      type: string
      required: false
      description: User's phone number
    phoneVerified:
      type: boolean
      required: false
      description: Whether the phone number has been verified
    firstName:
      type: string
      required: true
      description: User's first name
    lastName:
      type: string
      required: true
      description: User's last name
    groups:
      type: array
      items:
        type: string
      required: true
      description: User's groups
    status:
      type: string
      required: true
      enum_type: UserStatus
      enum_values:
        - ACTIVE
        - INACTIVE
        - PENDING
        - DELETED
      description: Current status of the user
    createdAt:
      type: timestamp
      required: true
      description: When the user was created
    updatedAt:
      type: timestamp
      required: true
      description: When the user was last updated
